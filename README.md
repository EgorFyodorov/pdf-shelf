# casinot-bot-v1

## Настройка окружения
1. Скопируйте `.env.example` в `.env` и укажите значения (`BOT_TOKEN`, параметры Postgres и путь к логам).
2. При необходимости скорректируйте `config.yaml` — он описывает приложение в формате YAML и парсится в датаклассы (см. `project/config.py`). Все параметры можно перекрыть переменными окружения из `.env`.

## Запуск в контейнерах
```
make build   # сборка образов
make up      # запускает bot + postgres в фоне
make logs    # поток логов бота из /var/log/bot/bot.log
make down    # остановить и удалить стэк
```
`make run` оставляет контейнеры в первом плане (`docker compose up bot`).

## Миграции
Схема описана в raw SQL `migrations/init.sql`. Скрипт запуска применяет этот файл при каждом старте контейнера.
- `make migrate` — вручную выполнить SQL из `migrations/init.sql` внутри контейнера.
- При необходимости обновляйте `migrations/init.sql` (например, добавляя `ALTER TABLE ...`) — entrypoint выполнит изменения на следующем запуске.
